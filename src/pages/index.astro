---
import Layout from "../layouts/Layout.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import { Image } from  "astro:assets";
import Box from "../assets/box.png";
import Plus from "../assets/plus.png";

import "../styles/style.scss";

---

<style lang="scss">
/* 全体の構成 */
.main-container {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  background: #FBEFE0;
  padding-bottom: 100px; // ボタン分の余白を確保
}

/* 上部固定の入力欄 */
.input-form {
  position: fixed;
  top: 0;
  width: 100%;
  padding: 15px 20px;
  background: #FBEFE0;
  z-index: 10;
  display: flex;
  justify-content: center;
  gap: 10px;
  border-bottom: 1px solid #ccc;

  input {
    width: 60%;
    padding: 10px;
    font-size: 16px;
    background: #eee;
    border: none;
    border-radius: 4px;
  }

  button {
    background: #AE9890;
    color: white;
    border: none;
    padding: 10px 20px;
    font-weight: bold;
    border-radius: 6px;
    cursor: pointer;
  }
}

/* 中央にToDoを表示 */
.todo-list {
  padding-top: 80px; // 入力欄の高さ分
  padding-bottom: 100px; // 下部ボタンのスペース
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 15px;

  .todo-item {
    font-weight: bold;
    font-size: 18px;
    padding: 12px;
    border-bottom: 2px solid black;
    width: 80%;
    cursor: pointer;
    transition: background 0.3s;
  }

  .todo-item.selected {
    background: #f9bcbc;
  }
}

/* 下部に常に固定されるボタン */
.btn-area {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 40px;
  z-index: 999;

  img {
    width: 60px;
    height: 60px;
    background: #AE9890;
    border-radius: 50%;
    padding: 10px;
    cursor: pointer;
  }
}





</style>

<Layout>
  <Header />
  <main class="main-container">
<main class="main-container">
  <!-- 上部固定：入力欄 -->
  <div class="input-form">
    <input type="text" id="todo-input" placeholder="やることを書く" />
    <button id="add-todo">追加</button>
  </div>

  <!-- ToDoリスト本体 -->
  <div id="todo-list" class="todo-list"></div>

  <!-- 下部固定：操作ボタン -->
  <div class="btn-area">
    <Image src={Box} alt="削除" id="delete-button" />
    <Image src={Plus} alt="追加" id="add-button" />
  </div>
</main>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const input = document.getElementById("todo-input");
    const addBtn = document.getElementById("add-todo");
    const plusBtn = document.getElementById("add-button");
    const deleteBtn = document.getElementById("delete-button");
    const list = document.getElementById("todo-list");

    // プラスボタン → 入力欄にフォーカス
    plusBtn.addEventListener("click", () => input.focus());

    // ToDo追加
    addBtn.addEventListener("click", () => {
      const text = input.value.trim();
      if (!text) return;

      const todo = document.createElement("div");
      todo.className = "todo-item";
      todo.textContent = text;

      todo.addEventListener("click", () => {
        todo.classList.toggle("selected");
      });

      list.prepend(todo);
      input.value = "";
    });

    // 削除
    deleteBtn.addEventListener("click", () => {
      document.querySelectorAll(".todo-item.selected").forEach(el => el.remove());
    });
  });
</script>
  <Footer />
  
</Layout> 


